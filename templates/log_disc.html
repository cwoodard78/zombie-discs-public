<!DOCTYPE html>
<html>
<head>
    <title>Zombie Discs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        form {
            margin-top: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        button {
            margin-top: 20px;
            margin-right: 10px;
        }
        #map-btn {
            margin-top: 10px;
        }        .radio-group {
            display: flex;
            align-items: center;
            gap: 20px; /* Space between each radio button group */
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px; /* Space between the radio button and its label */
        }
    </style>
</head>
<body>
    <h1>Welcome to Zombie Discs!</h1>
    <form id="disc-form" action="/submit-disc/" method="POST">
        {% csrf_token %}
        <!-- Radio buttons for Lost/Found -->
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" id="lost" name="type" value="lost" required>
                <label for="lost">Lost</label>
            </div>
            <div class="radio-option">
                <input type="radio" id="found" name="type" value="found" required>
                <label for="found">Found</label>
            </div>
        </div>
    
        <!-- Color field -->
        <label for="color">Disc Color:</label>
        <input type="text" id="color" name="color" placeholder="e.g., Red" required>
    
        <!-- Notes field -->
        <label for="notes">Notes:</label>
        <textarea id="notes" name="notes" rows="4" cols="50" placeholder="Add additional details..."></textarea>
    
        <!-- Coordinates -->
        <label for="coordinates">Coordinates:</label>
        <input type="text" id="coordinates" name="coordinates" placeholder="Click 'Select Coordinates on Map'" readonly required>
        <button type="button" id="map-btn" onclick="openMap()">Select Coordinates on Map</button>
    
        <!-- Submit and Cancel buttons -->
        <br>
        <button type="submit">Submit</button>
        <button type="button" onclick="resetForm()">Cancel</button>
    </form>
    

    <script>
        function openMap() {
            // Open the map interface in a new window
            const mapWindow = window.open("/map/", "Select Coordinates", "width=800,height=600");

            // Listen for the coordinates sent back from the map window
            window.addEventListener("message", (event) => {
                if (event.origin === window.location.origin) {
                    const coords = event.data;
                    if (coords && coords.lat && coords.lng) {
                        // Update the coordinates field in the form
                        const coordinatesField = document.getElementById("coordinates");
                        coordinatesField.value = `${coords.lat},${coords.lng}`;
                        alert(`Coordinates selected: Latitude ${coords.lat}, Longitude ${coords.lng}`);
                    }
                }
            });
        }

        function resetForm() {
            // Reset the form fields
            document.getElementById("disc-form").reset();
        }
    </script>
</body>
</html>
