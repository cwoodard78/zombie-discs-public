<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Zombie Discs{% endblock %}</title>
    {% load static %}
 
    <!-- Include Tailwind CSS -->
    <link href="{% static 'css/output.css' %}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    {% block extra_head %}
    <!--  Leaflet plugin for disc location in disc details page -->
    <link 
        rel="stylesheet" 
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
    </script>
    {% endblock %}
    <style>
        /* Floating button styles */
        .floating-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
            z-index: 1000;
        }

        .floating-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-900 font-sans">

    <!-- Header -->
    <!-- References: 
        - https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_mobile_navbar 
        - https://play.tailwindcss.com/BFEhU1EG1i-->
    <header class="bg-blue-500 text-white px-4 py-4">
        <div class="flex items-center justify-between">
          <!-- Site Logo -->
          <a href="{% url 'home' %}" class="text-2xl font-bold">Zombie Discs</a>
            <button id="burger" class="md:hidden">
              <!-- Burger Button -->
              <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
                   viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round"
                      d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
        </div>
      
        <!-- Nav Menu -->
        <nav id="menu" class="hidden flex-col mt-4 md:flex md:flex-row md:space-x-6 md:mt-0">
        {% if user.is_authenticated %}
        <a href="{% url 'inbox' %}" class="block py-2 hover:underline relative">
            Inbox
            {% if unread_count > 0 %}
                <span class="ml-1 inline-flex items-center justify-center bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5">
                {{ unread_count }}
                </span>
            {% endif %}
        </a>
        <a href="{% url 'user_disc_list' %}" class="block py-2 hover:underline">
            My Discs
            {% if new_matches_count > 0 %}
                <span class="ml-1 inline-flex items-center justify-center bg-green-500 text-white text-xs font-bold rounded-full w-5 h-5 animate-pulse">
                {{ new_matches_count }}
                </span>
            {% endif %}
        </a>
        <a href="{% url 'submit_disc' %}" class="block py-2 hover:underline">Log a Disc</a>
        <a href="{% url 'disc_search' %}" class="block py-2 hover:underline">Search</a>
        <a href="{% url 'disc_map_view' %}" class="block py-2 hover:underline">Map</a>
        <a href="{% url 'faq' %}" class="block py-2 hover:underline">Help</a>
        <a href="{% url 'profile' user.username %}" class="block py-2 hover:underline">Profile</a>
        <form action="{% url 'logout' %}" method="POST" class="block py-2">
            {% csrf_token %}
            <button type="submit" class="hover:underline">Logout</button>
        </form>
        {% else %}

            <a href="{% url 'about' %}" class="block py-2 hover:underline">About</a>
            <a href="{% url 'login' %}" class="block py-2 hover:underline">Login</a>
            <a href="{% url 'register' %}" class="block py-2 hover:underline">Register</a>
        {% endif %}
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center py-4">
        <p>&copy; 2025 Zombie Discs. All rights reserved.</p>
    </footer>

    <!-- Floating Button -->
    <a href="{% url 'submit_disc' %}" class="floating-btn" title="Log a Disc">+</a>

    
</body>
{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
      const burger = document.getElementById("burger");
      const menu = document.getElementById("menu");

      burger.addEventListener("click", function () {
        menu.classList.toggle("hidden");
      });
    });
</script>
{% endblock %}

</html>
